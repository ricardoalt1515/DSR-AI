# ============================================================================
# Terraform Variables - Production Environment H2O Allegiant
# Fecha: Oct 22, 2025
# ============================================================================

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------

aws_region  = "us-east-1"
environment = "prod"
owner_email = "devops@h2o-allegiant.com"

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------

vpc_cidr           = "10.0.0.0/16"
availability_zones = ["us-east-1a", "us-east-1b"]
enable_nat_gateway = true

# -----------------------------------------------------------------------------
# ECS Configuration (OPTIMIZADO)
# -----------------------------------------------------------------------------

ecs_task_cpu      = 1024  # 1 vCPU (optimizado para MVP)
ecs_task_memory   = 2048  # 2 GB (optimizado para MVP)
ecs_desired_count = 2     # 2 tasks para HA
ecs_min_capacity  = 1
ecs_max_capacity  = 3

# Container image (se actualiza después del primer push a ECR)
container_image = "882816896907.dkr.ecr.us-east-1.amazonaws.com/h2o-allegiant-prod-backend:latest"

# -----------------------------------------------------------------------------
# Database Configuration (OPTIMIZADO)
# -----------------------------------------------------------------------------

db_name               = "h2o_allegiant"
db_username           = "h2o_admin"
db_instance_class     = "db.t4g.micro"  # Optimizado para MVP
db_allocated_storage  = 20
db_multi_az           = false  # false para MVP (ahorra $15/mes), cambiar a true en producción real

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------

redis_node_type = "cache.t4g.micro"

# -----------------------------------------------------------------------------
# Domain & SSL (DESHABILITADO por ahora)
# -----------------------------------------------------------------------------

domain_name         = ""  # Vacío = sin dominio custom
enable_https        = false  # false = solo HTTP por ahora
acm_certificate_arn = ""
cors_origins        = "http://localhost:3000"  # Frontend local por ahora

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------

alarm_email = ""

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------

openai_model = "gpt-4o-mini"

# -----------------------------------------------------------------------------
# Secrets via environment variables (NO COMMIT)
# Configurar con: export TF_VAR_openai_api_key="sk-xxx"
#                 export TF_VAR_jwt_secret_key="$(openssl rand -hex 32)"
# -----------------------------------------------------------------------------
