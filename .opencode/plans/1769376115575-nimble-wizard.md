# Intake Panel: Cherry-Picked Improvements

**Status**: Ready to implement  
**Scope**: Minimal changes validated by expert review

---

## Expert Review Summary

Two expert subagents (UI/UX Designer, Code-Simplifier) reviewed the full redesign proposal.

**Verdict: Most changes are REGRESSIONS, not improvements.**

| Original Proposal | Expert Verdict |
|-------------------|----------------|
| 2-row layout | ‚ùå "Density worship" - trades clarity for compactness |
| Text buttons [Apply][Dismiss] | ‚ùå Break at 300px, icons are universal |
| Remove section title | ‚ùå Context loss |
| Remove ConfidenceDots | ‚ùå Dots are pre-attentive visual, "87%" requires parsing |
| Emoji üìÑ/üìù | ‚ùå Violates "no emoji icons" best practice |
| 150ms animation | ‚ùå Too fast to perceive |

**UI/UX Score: 4/10** - "Net regression"  
**Code-Simplifier Score: 3/10** - "Refactor disguised as simplification"

---

## Approved Changes (Cherry-Picked)

Only these 4 changes were validated as actual improvements:

### 1. Reduce Animation Duration
**Current**: 800ms (glow ‚Üí fly ‚Üí pulse ‚Üí collapse)  
**New**: 250ms (fade + translateY)

```tsx
// suggestion-row.tsx - change exit animation
exit={{ 
  opacity: 0, 
  y: -8,
  transition: { duration: 0.25, ease: 'easeOut' }
}}
```

**Why**: 800ms is "choreography theater" - annoying after 10 uses. 250ms is perceivable but not blocking.

### 2. Add Collapsible Sections
Wrap Documents and Notes with `<Collapsible>`.

```tsx
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from "@/components/ui/collapsible";

// State persisted to localStorage
const [docsOpen, setDocsOpen] = useLocalStorage('intake-docs-open', true);
const [notesOpen, setNotesOpen] = useLocalStorage('intake-notes-open', true);

<Collapsible open={docsOpen} onOpenChange={setDocsOpen}>
  <CollapsibleTrigger className="flex w-full items-center justify-between">
    <span>üìé Documents ({documents.length})</span>
    <ChevronDown className={cn("h-4 w-4 transition-transform", docsOpen && "rotate-180")} />
  </CollapsibleTrigger>
  <CollapsibleContent>
    <DocumentsSection ... />
  </CollapsibleContent>
</Collapsible>
```

**Important**: Default to EXPANDED, not collapsed. Let users establish preference.

### 3. Add Empty State
```tsx
{suggestions.length === 0 && (
  <div className="flex flex-col items-center justify-center py-12 text-center">
    <Sparkles className="h-8 w-8 text-muted-foreground/50 mb-3" />
    <p className="text-sm font-medium">No suggestions yet</p>
    <p className="text-xs text-muted-foreground mt-1">
      Upload documents or add notes to generate AI suggestions
    </p>
  </div>
)}
```

### 4. Add Undo Toast
```tsx
const handleReject = async (id: string) => {
  const suggestion = suggestions.find(s => s.id === id);
  await rejectSuggestion(id);
  
  toast({
    title: `Dismissed "${suggestion?.fieldLabel}"`,
    action: (
      <Button variant="outline" size="sm" onClick={() => undoReject(id)}>
        Undo
      </Button>
    ),
    duration: 5000,
  });
};
```

---

## What We're NOT Changing

| Keep As-Is | Reason |
|------------|--------|
| **4-row layout** | One concern per row = maintainable |
| **ConfidenceDots ‚óè‚óè‚óè‚óã** | Pre-attentive visual, scannable at glance |
| **Section title** | Provides disambiguation context |
| **Icon buttons [‚úì][‚úó]** | Fixed 28px, universal semantics, i18n-free |
| **Source filename row** | Full filename visible, not truncated |
| **Hover-only actions (desktop)** | Clean UI, actions on demand |
| **FileText icon** | Lucide SVG, consistent cross-platform |

---

## Implementation

### Files to Modify

1. **suggestion-row.tsx** - Change exit animation duration (line ~206)
2. **intake-panel-content.tsx** - Add Collapsible wrappers
3. **ai-suggestions-section.tsx** - Add empty state
4. **ai-suggestions-section.tsx** - Add undo toast on reject

### Effort

| Change | Time |
|--------|------|
| Animation tweak | 15min |
| Collapsible sections | 45min |
| Empty state | 20min |
| Undo toast | 30min |
| **Total** | **~2h** |

---

## Verification

```bash
cd frontend && bun run check:ci
```

**Manual Testing:**
- [ ] Animation feels responsive (not sluggish, not jarring)
- [ ] Documents/Notes collapse and expand
- [ ] Collapse state persists across page refresh
- [ ] Empty state shows when no suggestions
- [ ] Undo toast appears after dismiss
- [ ] Undo actually restores the suggestion
- [ ] Everything else works exactly as before

---

## Lesson Learned

> "Don't change things for the sake of 'improvement.' The current design works."
> ‚Äî Code-Simplifier subagent

The original plan exhibited "density worship" - optimizing for viewport count over comprehension. Expert review prevented shipping regressions.
